{"openapi":"3.1.0","info":{"title":"ヨシコさん、ヨシッ！API","description":"Industrial Safety Management System Backend API","version":"0.1.0"},"paths":{"/api/auth/register":{"post":{"tags":["authentication"],"summary":"Register","description":"Register a new user with email and password.\n\nValidates password requirements, checks for duplicate emails,\ncreates user with hashed password, and returns JWT cookie.","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["authentication"],"summary":"Login","description":"Login with email and password.\n\nVerifies credentials, generates JWT, and sets HTTP-only cookie.","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/google":{"get":{"tags":["authentication"],"summary":"Google Login","description":"Initiate Google OAuth flow.","operationId":"google_login_api_auth_google_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/callback/google":{"get":{"tags":["authentication"],"summary":"Google Callback","description":"Handle Google OAuth callback.","operationId":"google_callback_api_auth_callback_google_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}},{"name":"state","in":"query","required":true,"schema":{"type":"string","title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/discord":{"get":{"tags":["authentication"],"summary":"Discord Login","description":"Initiate Discord OAuth flow.","operationId":"discord_login_api_auth_discord_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/callback/discord":{"get":{"tags":["authentication"],"summary":"Discord Callback","description":"Handle Discord OAuth callback.","operationId":"discord_callback_api_auth_callback_discord_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}},{"name":"state","in":"query","required":true,"schema":{"type":"string","title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/me":{"get":{"tags":["authentication"],"summary":"Get Me","description":"Get current authenticated user.","operationId":"get_me_api_auth_me_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/logout":{"post":{"tags":["authentication"],"summary":"Logout","description":"Logout current user by clearing cookie.","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Logout Api Auth Logout Post"}}}}}}},"/api/v1/sops":{"post":{"tags":["sops"],"summary":"Upload And Structure Sop","description":"Upload and structure a new SOP.\n\nAccepts optional image files and/or text content, uses AI to structure the SOP.\nAt least one of images or text_content must be provided.\n\nArgs:\n    title: SOP title\n    images: Optional list of image files\n    text_content: Optional text content\n    current_user: Current authenticated user\n    sop_repo: SOP repository\n\nReturns:\n    UploadSOPResponse with structured SOP ID\n\nRaises:\n    HTTPException: If upload or structuring fails, or if neither images nor text provided","operationId":"upload_and_structure_sop_api_v1_sops_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_and_structure_sop_api_v1_sops_post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadSOPResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["sops"],"summary":"List Sops","description":"List all SOPs for the current user.\n\nArgs:\n    current_user: Current authenticated user\n    sop_repo: SOP repository\n\nReturns:\n    List of SOPListItemSchema","operationId":"list_sops_api_v1_sops_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SOPListItemSchema"},"title":"Response List Sops Api V1 Sops Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sops/{sop_id}":{"get":{"tags":["sops"],"summary":"Get Sop","description":"Get SOP details by ID.\n\nArgs:\n    sop_id: SOP ID\n    current_user: Current authenticated user\n    sop_repo: SOP repository\n\nReturns:\n    SOPSchema\n\nRaises:\n    HTTPException: If SOP not found or user not authorized","operationId":"get_sop_api_v1_sops__sop_id__get","parameters":[{"name":"sop_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Sop Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SOPSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["sops"],"summary":"Delete Sop","description":"Soft delete an SOP.\n\nArgs:\n    sop_id: SOP ID\n    current_user: Current authenticated user\n    sop_repo: SOP repository\n\nRaises:\n    HTTPException: If SOP not found or user not authorized","operationId":"delete_sop_api_v1_sops__sop_id__delete","parameters":[{"name":"sop_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Sop Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions":{"post":{"tags":["sessions"],"summary":"Start Session","description":"Start a new work session.\n\nArgs:\n    request: Start session request\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    StartSessionResponse with session and first step\n\nRaises:\n    HTTPException: If SOP not found, not structured, or worker has active session","operationId":"start_session_api_v1_sessions_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartSessionRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["sessions"],"summary":"List Sessions","description":"List all sessions for the current user.\n\nArgs:\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n    include_aborted: Whether to include aborted sessions\n\nReturns:\n    List of WorkSessionSchema","operationId":"list_sessions_api_v1_sessions_get","parameters":[{"name":"include_aborted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Aborted"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WorkSessionSchema"},"title":"Response List Sessions Api V1 Sessions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/current":{"get":{"tags":["sessions"],"summary":"Get Current Session","description":"Get the current active session for the authenticated user.\n\nArgs:\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    WorkSessionSchema if active session exists, None otherwise","operationId":"get_current_session_api_v1_sessions_current_get","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/WorkSessionSchema"},{"type":"null"}],"title":"Response Get Current Session Api V1 Sessions Current Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}":{"get":{"tags":["sessions"],"summary":"Get Session","description":"Get session details by ID.\n\nArgs:\n    session_id: Session ID\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    WorkSessionSchema\n\nRaises:\n    HTTPException: If session not found or user not authorized","operationId":"get_session_api_v1_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkSessionSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}/complete":{"post":{"tags":["sessions"],"summary":"Complete Session","description":"Mark a session as complete.\n\nArgs:\n    session_id: Session ID\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    CompleteSessionResponse\n\nRaises:\n    HTTPException: If session not found, not authorized, or cannot be completed","operationId":"complete_session_api_v1_sessions__session_id__complete_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}/pause":{"post":{"tags":["sessions"],"summary":"Pause Session","description":"Pause an in-progress session.","operationId":"pause_session_api_v1_sessions__session_id__pause_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PauseSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}/resume":{"post":{"tags":["sessions"],"summary":"Resume Session","description":"Resume a paused session.","operationId":"resume_session_api_v1_sessions__session_id__resume_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResumeSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sessions/{session_id}/abort":{"post":{"tags":["sessions"],"summary":"Abort Session","description":"Abort a session permanently.","operationId":"abort_session_api_v1_sessions__session_id__abort_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AbortSessionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AbortSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/checks":{"post":{"tags":["checks"],"summary":"Execute Safety Check","description":"Execute a safety check with image and audio verification.\n\nArgs:\n    request: Execute check request with base64-encoded image and audio\n    current_user: Current authenticated user\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    ExecuteCheckResponse with result, feedback text and audio\n\nRaises:\n    HTTPException: If validation fails or check execution fails","operationId":"execute_safety_check_api_v1_checks_post","parameters":[{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteCheckRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/checks/{check_id}/override":{"post":{"tags":["checks"],"summary":"Override Check","description":"Override a safety check result (supervisor only).\n\nArgs:\n    check_id: Check ID\n    request: Override request with reason\n    current_user: Current authenticated user (must be supervisor)\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    OverrideCheckResponse\n\nRaises:\n    HTTPException: If check not found, not authorized, or override fails","operationId":"override_check_api_v1_checks__check_id__override_post","parameters":[{"name":"check_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Check Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverrideCheckRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverrideCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/sessions":{"get":{"tags":["audit"],"summary":"List Audit Sessions","description":"List sessions for audit review (supervisor only).\n\nArgs:\n    status_filter: Filter by status (default: completed)\n    current_user: Current authenticated user (supervisor)\n    session_repo: Session repository\n    sop_repo: SOP repository\n\nReturns:\n    List of AuditSessionListItem\n\nRaises:\n    HTTPException: If not authorized","operationId":"list_audit_sessions_api_v1_audit_sessions_get","parameters":[{"name":"status_filter","in":"query","required":false,"schema":{"type":"string","default":"completed","title":"Status Filter"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditSessionListItem"},"title":"Response List Audit Sessions Api V1 Audit Sessions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/sessions/{session_id}":{"get":{"tags":["audit"],"summary":"Get Audit Session","description":"Get full audit trail for a session (supervisor only).\n\nArgs:\n    session_id: Session ID\n    current_user: Current authenticated user (supervisor)\n    session_repo: Session repository\n\nReturns:\n    WorkSessionSchema with full audit trail\n\nRaises:\n    HTTPException: If session not found or not authorized","operationId":"get_audit_session_api_v1_audit_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkSessionSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/sessions/{session_id}/approve":{"post":{"tags":["audit"],"summary":"Approve Session","description":"Approve a completed session (supervisor only).\n\nArgs:\n    session_id: Session ID\n    current_user: Current authenticated user (supervisor)\n    session_repo: Session repository\n\nReturns:\n    ApproveSessionResponse\n\nRaises:\n    HTTPException: If session not found, not authorized, or cannot be approved","operationId":"approve_session_api_v1_audit_sessions__session_id__approve_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApproveSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/sessions/{session_id}/reject":{"post":{"tags":["audit"],"summary":"Reject Session","description":"Reject a completed session (supervisor only).\n\nArgs:\n    session_id: Session ID\n    request: Reject request with reason\n    current_user: Current authenticated user (supervisor)\n    session_repo: Session repository\n\nReturns:\n    RejectSessionResponse\n\nRaises:\n    HTTPException: If session not found, not authorized, or cannot be rejected","operationId":"reject_session_api_v1_audit_sessions__session_id__reject_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"access_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RejectSessionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RejectSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Root  Get"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint with database connectivity verification.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Health Get"}}}}}}}},"components":{"schemas":{"AbortSessionRequest":{"properties":{"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"type":"object","title":"AbortSessionRequest","description":"Request to abort a session."},"AbortSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"}},"type":"object","required":["session"],"title":"AbortSessionResponse","description":"Response from aborting a session."},"ApproveSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"},"approved":{"type":"boolean","title":"Approved"}},"type":"object","required":["session","approved"],"title":"ApproveSessionResponse","description":"Response from approving a session."},"AuditSessionListItem":{"properties":{"session_id":{"type":"string","format":"uuid","title":"Session Id"},"sop_title":{"type":"string","title":"Sop Title"},"worker_id":{"type":"string","format":"uuid","title":"Worker Id"},"status":{"type":"string","title":"Status"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"check_count":{"type":"integer","title":"Check Count"},"failed_check_count":{"type":"integer","title":"Failed Check Count"}},"type":"object","required":["session_id","sop_title","worker_id","status","completed_at","check_count","failed_check_count"],"title":"AuditSessionListItem","description":"Audit session list item."},"Body_upload_and_structure_sop_api_v1_sops_post":{"properties":{"title":{"type":"string","title":"Title"},"images":{"items":{"type":"string","format":"binary"},"type":"array","title":"Images","default":[]},"text_content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text Content"}},"type":"object","required":["title"],"title":"Body_upload_and_structure_sop_api_v1_sops_post"},"CompleteSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"},"completed":{"type":"boolean","title":"Completed"}},"type":"object","required":["session","completed"],"title":"CompleteSessionResponse","description":"Response from completing a session."},"ExecuteCheckRequest":{"properties":{"session_id":{"type":"string","format":"uuid","title":"Session Id"},"step_id":{"type":"string","format":"uuid","title":"Step Id"},"image_base64":{"type":"string","title":"Image Base64"},"audio_base64":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Base64"},"audio_transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Transcript"}},"type":"object","required":["session_id","step_id","image_base64"],"title":"ExecuteCheckRequest","description":"Request to execute a safety check."},"ExecuteCheckResponse":{"properties":{"result":{"type":"string","title":"Result"},"feedback_text":{"type":"string","title":"Feedback Text"},"feedback_audio_base64":{"type":"string","title":"Feedback Audio Base64"},"confidence_score":{"type":"number","title":"Confidence Score"},"needs_review":{"type":"boolean","title":"Needs Review"},"next_step_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Next Step Id"},"session_updated":{"type":"boolean","title":"Session Updated"}},"type":"object","required":["result","feedback_text","feedback_audio_base64","confidence_score","needs_review","next_step_id","session_updated"],"title":"ExecuteCheckResponse","description":"Response from executing a safety check."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HazardSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"description":{"type":"string","title":"Description"},"severity":{"type":"string","title":"Severity"},"mitigation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mitigation"}},"type":"object","required":["id","description","severity"],"title":"HazardSchema","description":"Hazard schema."},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"Login request model."},"OverrideCheckRequest":{"properties":{"reason":{"type":"string","title":"Reason"}},"type":"object","required":["reason"],"title":"OverrideCheckRequest","description":"Request to override a safety check."},"OverrideCheckResponse":{"properties":{"check_id":{"type":"string","format":"uuid","title":"Check Id"},"overridden":{"type":"boolean","title":"Overridden"}},"type":"object","required":["check_id","overridden"],"title":"OverrideCheckResponse","description":"Response from overriding a check."},"PauseSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"}},"type":"object","required":["session"],"title":"PauseSessionResponse","description":"Response from pausing a session."},"RegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"name":{"type":"string","title":"Name"}},"type":"object","required":["email","password","name"],"title":"RegisterRequest","description":"Registration request model."},"RejectSessionRequest":{"properties":{"reason":{"type":"string","title":"Reason"}},"type":"object","required":["reason"],"title":"RejectSessionRequest","description":"Request to reject a session."},"RejectSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"},"rejected":{"type":"boolean","title":"Rejected"}},"type":"object","required":["session","rejected"],"title":"RejectSessionResponse","description":"Response from rejecting a session."},"ResumeSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"}},"type":"object","required":["session"],"title":"ResumeSessionResponse","description":"Response from resuming a session."},"SOPListItemSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"title":{"type":"string","title":"Title"},"created_by":{"type":"string","format":"uuid","title":"Created By"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"task_count":{"type":"integer","title":"Task Count"},"step_count":{"type":"integer","title":"Step Count"}},"type":"object","required":["id","title","created_by","created_at","updated_at","task_count","step_count"],"title":"SOPListItemSchema","description":"SOP list item schema (without tasks)."},"SOPSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"title":{"type":"string","title":"Title"},"created_by":{"type":"string","format":"uuid","title":"Created By"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"tasks":{"items":{"$ref":"#/components/schemas/TaskSchema"},"type":"array","title":"Tasks","default":[]}},"type":"object","required":["id","title","created_by","created_at","updated_at"],"title":"SOPSchema","description":"SOP response schema."},"SafetyCheckSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"step_id":{"type":"string","format":"uuid","title":"Step Id"},"result":{"type":"string","title":"Result"},"feedback_text":{"type":"string","title":"Feedback Text"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"needs_review":{"type":"boolean","title":"Needs Review","default":false},"checked_at":{"type":"string","format":"date-time","title":"Checked At"},"override_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Override Reason"},"override_by":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Override By"}},"type":"object","required":["id","step_id","result","feedback_text","checked_at"],"title":"SafetyCheckSchema","description":"Safety check schema."},"StartSessionRequest":{"properties":{"sop_id":{"type":"string","format":"uuid","title":"Sop Id"}},"type":"object","required":["sop_id"],"title":"StartSessionRequest","description":"Request to start a new work session."},"StartSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/WorkSessionSchema"},"first_step_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"First Step Id"}},"type":"object","required":["session","first_step_id"],"title":"StartSessionResponse","description":"Response from starting a session."},"StepSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"description":{"type":"string","title":"Description"},"order_index":{"type":"integer","title":"Order Index"},"expected_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Action"},"expected_result":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Result"},"hazards":{"items":{"$ref":"#/components/schemas/HazardSchema"},"type":"array","title":"Hazards","default":[]}},"type":"object","required":["id","description","order_index"],"title":"StepSchema","description":"Step schema."},"TaskSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"order_index":{"type":"integer","title":"Order Index"},"steps":{"items":{"$ref":"#/components/schemas/StepSchema"},"type":"array","title":"Steps","default":[]}},"type":"object","required":["id","title","order_index"],"title":"TaskSchema","description":"Task schema."},"UploadSOPResponse":{"properties":{"sop_id":{"type":"string","format":"uuid","title":"Sop Id"},"title":{"type":"string","title":"Title"},"success":{"type":"boolean","title":"Success"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["sop_id","title","success"],"title":"UploadSOPResponse","description":"Response from uploading an SOP."},"UserResponse":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","title":"Email"},"name":{"type":"string","title":"Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"}},"type":"object","required":["id","email","name","avatar_url"],"title":"UserResponse","description":"User response model."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WorkSessionSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"sop_id":{"type":"string","format":"uuid","title":"Sop Id"},"sop_title":{"type":"string","title":"Sop Title"},"worker_id":{"type":"string","format":"uuid","title":"Worker Id"},"status":{"type":"string","title":"Status"},"current_step_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Current Step Id"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"approved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Approved At"},"approved_by":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Approved By"},"paused_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paused At"},"aborted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Aborted At"},"abort_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Abort Reason"},"locked":{"type":"boolean","title":"Locked"},"rejection_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rejection Reason"},"checks":{"items":{"$ref":"#/components/schemas/SafetyCheckSchema"},"type":"array","title":"Checks","default":[]}},"type":"object","required":["id","sop_id","sop_title","worker_id","status","started_at","locked"],"title":"WorkSessionSchema","description":"Work session response schema."}}}}